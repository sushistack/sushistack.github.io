I"‹<p>ìŠ¤í”„ë§ í™˜ê²½ì—ì„œ ê°œë°œì„ í•˜ë©´ì„œ, ì´ë¯¸ì§€ë¥¼ ê°€ê³µí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¡œ ë‚´ë ¤ì¤˜ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ë°ì´í„°ëŠ” ìŠ¤í”„ë§ ì•± ë‚´ì—ì„œëŠ” <strong>Byte Array</strong> íƒ€ì…ìœ¼ë¡œ, Database ìƒì—ì„œëŠ” <strong>Binary</strong> íƒ€ì…ìœ¼ë¡œ í•¸ë“¤ë§ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<h2 id="json-serialize-in-jackson">Json Serialize in Jackson</h2>

<blockquote>
  <p>ì´ë¯¸ì§€ ë°ì´í„° ì „ë‹¬</p>
  <ol>
    <li>CLIENT &lt;â€”&gt; SPRING APP1</li>
    <li>SPRING APP1 &lt;â€”&gt; SPRING APP2</li>
    <li>SPRING APP2 &lt;â€”&gt; DATABASE</li>
  </ol>
</blockquote>

<p>ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ìƒí™©ì„ ê°„ë‹¨í•˜ê²Œ ìœ„ì™€ ê°™ì´ 3ê°œì˜ íë¦„ë¡œ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë•Œ 2ë²ˆ ì¼€ì´ìŠ¤ì¸ <strong>Server To Server</strong> ê°„ì˜ ë°ì´í„° ì „ì†¡ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">SPRING APP2</code>ì—ì„œ ì´ë¯¸ì§€ <strong>byte array</strong> ë°ì´í„°ë¥¼ í¬í•¨í•œ Json ë°ì´í„°ë¥¼ ë°›ê³ , ì´ë¯¸ì§€ë¥¼ serializingí•˜ëŠ” ê³¼ì •ì—ì„œ <strong>String</strong> í˜•íƒœë¡œ ë¦¬í„´ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<h3 id="byte-array-jackson-serialize-ì ìš©-ë°©ë²•">byte array Jackson serialize ì ìš© ë°©ë²•</h3>

<p>ì›ì¸ì„ íŒŒì•…í•´ë³´ë‹ˆ, ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ì–´ ìˆëŠ” byte array serializerì˜ ê²½ìš°, ë‹¤ë¥¸ ì •ìˆ˜ ë°°ì—´ê³¼ëŠ” ë‹¤ë¥´ê²Œ ê²°ê³¼ ê°’ì„ ìˆ«ìì˜ ë°°ì—´ì´ ì•„ë‹ˆë¼ <strong>Base64</strong>ë¡œ ì¸ì½”ë”©ëœ Bytesë¥¼ ë°˜í™˜í•˜ë„ë¡ ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<div class="related-link-wrap">
    <a class="related-link" href="https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/2.8.4/com/fasterxml/jackson/databind/ser/std/ByteArraySerializer.html" target="_blank" rel="nofollow noopener noreferrer">
      <div class="related-link-icon">
         <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="java" class="svg-inline--fa fa-java fa-w-12" role="img" viewBox="0 0 384 512" style="&#10;    width: 24px;&#10;    height: 24px;&#10;    color: #8a4baf;&#10;"><path fill="currentColor" d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 53.2 242.84 0 242.84 0c21.5 84.5-75.6 110.1-110.7 162.6-23.9 35.9 11.7 74.4 60.2 118.2zm114.6-176.2c.1 0-175.2 43.8-91.5 140.2 24.7 28.4-6.5 54-6.5 54s62.7-32.4 33.9-72.9c-26.9-37.8-47.5-56.6 64.1-121.3zm-6.1 270.5a12.19 12.19 0 0 1-2 2.6c128.3-33.7 81.1-118.9 19.8-97.3a17.33 17.33 0 0 0-8.2 6.3 70.45 70.45 0 0 1 11-3c31-6.5 75.5 41.5-20.6 91.4zM348 437.4s14.5 11.9-15.9 21.2c-57.9 17.5-240.8 22.8-291.6.7-18.3-7.9 16-19 26.8-21.3 11.2-2.4 17.7-2 17.7-2-20.3-14.3-131.3 28.1-56.4 40.2C232.84 509.4 401 461.3 348 437.4zM124.44 396c-78.7 22 47.9 67.4 148.1 24.5a185.89 185.89 0 0 1-28.2-13.8c-44.7 8.5-65.4 9.1-106 4.5-33.5-3.8-13.9-15.2-13.9-15.2zm179.8 97.2c-78.7 14.8-175.8 13.1-233.3 3.6 0-.1 11.8 9.7 72.4 13.6 92.2 5.9 233.8-3.3 237.1-46.9 0 0-6.4 16.5-76.2 29.7zM260.64 353c-59.2 11.4-93.5 11.1-136.8 6.6-33.5-3.5-11.6-19.7-11.6-19.7-86.8 28.8 48.2 61.4 169.5 25.9a60.37 60.37 0 0 1-21.1-12.8z" /></svg>
        
      </div>
      <div class="link-title-wrap">
        <div class="link-title">
          <div class="link-title-text">ByteArraySerializer (jackson-databind 2.8.4 API)</div>
        </div>
      </div>
      <div class="display-link-wrap">
        <div class="display-link">
          <span class="display-link-text">www.javadoc.io</span>
        </div>
      </div>
    </a>
</div>

<h3 id="ì»¤ìŠ¤í…€-json-serializer-ì ìš©í•˜ê¸°">ì»¤ìŠ¤í…€ Json Serializer ì ìš©í•˜ê¸°</h3>

<p>ë‹¤ìŒ ì½”ë“œì™€ ê°™ì´ JsonSerializer í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ byte arrayê°€ ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´ë¡œ ë‚˜ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ByteArraySerializer</span> <span class="kd">extends</span> <span class="nc">JsonSerializer</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">,</span> <span class="nc">JsonGenerator</span> <span class="n">jsonGenerator</span><span class="o">,</span> <span class="nc">SerializerProvider</span> <span class="n">provider</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="n">jsonGenerator</span><span class="o">.</span><span class="na">writeStartArray</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">bytes</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">jsonGenerator</span><span class="o">.</span><span class="na">writeNumber</span><span class="o">(</span><span class="n">unsignedToBytes</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="n">jsonGenerator</span><span class="o">.</span><span class="na">writeEndArray</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">unsignedToBytes</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>ì»¤ìŠ¤í…€ byte array serializerë¥¼ ë§Œë“¤ì—ˆìœ¼ë©´, ì ìš©í•˜ê³ ì í•˜ëŠ” í´ë˜ìŠ¤ì— ë‹¤ìŒê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">@JsonSerialize</code>ì„ ì´ìš©í•˜ì—¬ ì„¤ì •í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Something</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">binary</span><span class="o">;</span>

  <span class="nd">@JsonSerialize</span><span class="o">(</span><span class="n">using</span><span class="o">=</span> <span class="nc">ByteArraySerializer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">getBinary</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">binary</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ ì²˜ëŸ¼ ì„¤ì •í•´ì£¼ì‹œë©´ byte array í˜•íƒœì˜ ë°ì´í„°ë¥¼ í•¸ë“¤ë§í•  ë•Œ, <code class="language-plaintext highlighter-rouge">Base64</code>ë¡œ ì¸ì½”ë”©ëœ ê°’ì´ ì•„ë‹ˆë¼ ì •ìˆ˜ì˜ ë°°ì—´ í˜•íƒœì˜ byte arrayë¡œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì € ê°™ì€ ê²½ìš°, byte array ìì²´ë¥¼ ì‹¤ì œ ì •ìˆ˜ì˜ ë°°ì—´ í˜•íƒœë¡œ í•¸ë“¤ë§í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤. ë§Œì•½ ê·¸ë ‡ì§€ ì•Šê³  base64 í˜•íƒœë¡œ ì´ìš©í•˜ë ¤ê³  í•œë‹¤ë©´ ì»¤ìŠ¤í…€ serializerë¥¼ ë§Œë“œì‹¤ í•„ìš”ëŠ” ì—†ìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<h2 id="ë§ºìŒ">ë§ºìŒ</h2>

<p>Jackson byte array serialize í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì´ë‚˜ ì´ìƒí•œ ì ì€ ëŒ“ê¸€ë¡œ ë¶€íƒë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
:ET