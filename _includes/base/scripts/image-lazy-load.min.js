!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.lazyLoad=t()}(this,function(){var o,r,i,d,l,c={pageUpdatedEventName:"page:updated",elements:"img[data-src], img[data-srcset], source[data-srcset], iframe[data-src], video[data-src], [data-lazyload]",rootMargin:"0px",threshold:0,maxFrameCount:10},s=[];function u(e){e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-lazyload"),e.style.paddingTop=0,e.classList.remove('loading-img')}function m(){this.removeEventListener("load",m),u(this)}function f(e){var t=e.getAttribute("data-srcset"),n=e.getAttribute("data-src"),a=null!==e.getAttribute("data-lazyload");t&&(e.setAttribute("srcset",t),window.picturefill&&window.picturefill({elements:[e]})),n&&(e.src=n),a&&(e.setAttribute("data-lazyloaded",""),e.removeEventListener("load",m),u(e))}function g(e){0===i&&d.disconnect();for(var t=0;t<e.length;t++){var n=e[t];0<n.intersectionRatio&&(i--,d.unobserve(n.target),n.target.addEventListener("load",m,!1),f(n.target))}}function v(){var e,t,n,a;if("really-old"===l){for(i=s.length,e=0;e<i;e++)s[e]&&(f(s[e]),u(s[e]));s=[]}else if("old"===l){if(r===c.maxFrameCount){for(i=s.length,e=0;e<i;e++){s[e]&&void 0===s[e].lazyloaded&&(n=s[e],0<(a=(n="SOURCE"===n.tagName?n.parentNode:n).getBoundingClientRect()).bottom&&0<a.right&&a.left<(window.innerWidth||document.documentElement.clientWidth)&&a.top<(window.innerHeight||document.documentElement.clientHeight))&&(t=s[e],s[e]=void 0,t.lazyloaded=!0,t.addEventListener("load",m,!1),f(t))}for(e=0;e<i;e++)void 0===s[e]&&s.splice(e,1);i=s.length,r=-1}0<i&&(r++,o=window.requestAnimationFrame(v))}else if("new"===l)for(d=new IntersectionObserver(g,{rootMargin:c.rootMargin,threshold:c.threshold}),i=s.length,e=0;e<i;e++)s[e]&&void 0===s[e].lazyloaded&&d.observe(s[e])}function n(){if("old"===l)try{cancelAnimationFrame(o)}catch(e){}else if("new"===l)try{d.disconnect()}catch(e){}s=function(e){for(var t=[],n=0,t=[],n=e.length;n;)t[--n]=e[n];return t}(document.querySelectorAll(c.elements)),i=s.length,r=c.maxFrameCount,v()}return function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);l="addEventListener"in window&&window.requestAnimationFrame&&(document.body.getBoundingClientRect,1)?"IntersectionObserver"in window?"new":"old":"really-old",n(),c.pageUpdatedEventName&&document.addEventListener(c.pageUpdatedEventName,n,!0)}}),lazyLoad();